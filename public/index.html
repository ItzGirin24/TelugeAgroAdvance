<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TelugeAgro Profil </title>
    <link rel="icon" href="https://raw.githubusercontent.com/ItzGirin24/TelugeAgro/refs/heads/main/logo%20Teluge.jpg" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 50%, #15803d 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #22c55e;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #16a34a;
        }

        /* Loading Animation */
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #22c55e;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Glass Container */
        .glass-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
        }

        /* Avatar Animations */
        .avatar {
            position: relative;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .avatar:hover {
            transform: scale(1.05) rotate(2deg);
        }
        
        .avatar::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #22c55e, #16a34a, #15803d, #22c55e);
            border-radius: 50%;
            z-index: -1;
            animation: rotate 3s linear infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .avatar:hover::before {
            opacity: 1;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Link Button Animations */
        .link-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }
        
        .link-btn:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(34, 197, 94, 0.3);
        }
        
        .link-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        
        .link-btn:hover::before {
            left: 100%;
        }
        
        .link-btn:active {
            transform: translateY(-4px) scale(0.98);
        }

        /* Icon Animations */
        .link-btn img {
            transition: all 0.3s ease;
        }
        
        .link-btn:hover img {
            transform: scale(1.1) rotate(5deg);
            filter: brightness(1.1);
        }

        /* Floating Elements */
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* Link Button Categories */
        .btn-ecommerce {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }
        
        .btn-social {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }
        
        .btn-business {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
        }
        
        .btn-contact {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        /* Edit Mode Styles */
        .edit-mode .link-btn {
            border: 2px dashed #22c55e !important;
            position: relative;
        }
        
        .edit-controls {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            gap: 4px;
            z-index: 10;
        }
        
        .edit-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .edit-btn:hover {
            transform: scale(1.1);
        }

        /* Editable Content */
        [contenteditable="true"] {
            outline: 2px dashed #22c55e;
            outline-offset: 4px;
            padding: 8px;
            border-radius: 8px;
            background: rgba(34, 197, 94, 0.05);
            transition: all 0.3s ease;
        }
        
        [contenteditable="true"]:focus {
            outline-color: #16a34a;
            background: rgba(34, 197, 94, 0.1);
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .glass-container {
                margin: 12px;
                padding: 24px 18px;
                border-radius: 28px;
            }

            .avatar {
                width: 120px;
                height: 120px;
            }

            .link-btn {
                padding: 16px 20px;
                font-size: 15px;
            }

            h1 {
                font-size: 24px;
            }

            .description {
                font-size: 14px;
            }

            .stat-card {
                padding: 4px;
            }

            .counter {
                font-size: 2.2rem;
            }

            .edit-controls {
                top: 4px;
                right: 4px;
            }

            .edit-btn {
                width: 24px;
                height: 24px;
                font-size: 10px;
            }

            .admin-panel {
                bottom: 16px;
                left: 16px;
            }

            .modal {
                margin: 16px;
            }
        }

        @media (max-width: 640px) {
            .glass-container {
                margin: 10px;
                padding: 20px 16px;
                border-radius: 24px;
            }

            .avatar {
                width: 100px;
                height: 100px;
            }

            .link-btn {
                padding: 14px 18px;
                font-size: 14px;
            }

            h1 {
                font-size: 22px;
            }

            .description {
                font-size: 13px;
            }

            .stat-card {
                padding: 3px;
            }

            .counter {
                font-size: 2rem;
            }

            .edit-controls {
                top: 4px;
                right: 4px;
            }

            .edit-btn {
                width: 22px;
                height: 22px;
                font-size: 9px;
            }

            .admin-panel {
                bottom: 14px;
                left: 14px;
            }

            .modal {
                margin: 12px;
            }
        }

        @media (max-width: 480px) {
            .glass-container {
                margin: 8px;
                padding: 16px 12px;
                border-radius: 20px;
            }

            .avatar {
                width: 90px;
                height: 90px;
            }

            .link-btn {
                padding: 12px 16px;
                font-size: 13px;
            }

            h1 {
                font-size: 20px;
            }

            .description {
                font-size: 12px;
            }

            .stat-card {
                padding: 2px;
            }

            .counter {
                font-size: 1.8rem;
            }

            .edit-controls {
                top: 2px;
                right: 2px;
            }

            .edit-btn {
                width: 20px;
                height: 20px;
                font-size: 8px;
            }

            .admin-panel {
                bottom: 12px;
                left: 12px;
            }

            .modal {
                margin: 8px;
            }

            .share-btn {
                top: 4px;
                right: 4px;
                width: 10px;
                height: 10px;
            }

            .toast {
                top: 16px;
                right: 16px;
                left: 16px;
                width: auto;
            }
        }

        /* Background Pattern */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            background-image: 
                radial-gradient(circle at 25% 25%, white 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, white 2px, transparent 2px);
            background-size: 50px 50px;
            animation: pattern-move 20s linear infinite;
            pointer-events: none;
        }
        
        @keyframes pattern-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Admin Panel Styles */
        .admin-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }
        
        .admin-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .admin-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }

        /* Modal Styles */
        .modal {
            backdrop-filter: blur(10px);
            animation: modalFadeIn 0.3s ease-out;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Toast Animation */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
        }

        /* Share Button Animation */
        .share-btn {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .share-btn:hover {
            background: #22c55e;
            transform: scale(1.1) rotate(180deg);
        }
        
        .share-btn:hover svg {
            color: white;
        }

        /* Statistics Animation */
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: default;
            user-select: none;
        }
        
        .stat-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        /* Footer Styles */
        .footer {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Animated Counter Styles */
        .counter {
            font-weight: 700;
            font-size: 2.5rem;
            color: #16a34a;
            transition: color 0.3s ease;
        }

        .stat-card:hover .counter {
            color: #22c55e;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-green-600 z-50 flex flex-col items-center justify-center text-white">
        <div class="loading-spinner mb-6"></div>
        <h3 class="text-2xl font-bold mb-2">TelugeAgro</h3>
        <p class="text-lg opacity-80">Memuat Bio </p>
    </div>

    <!-- Background Pattern -->
    <div class="bg-pattern"></div>

    <!-- Share Button -->
    <button class="share-btn fixed top-6 right-6 w-12 h-12 rounded-full shadow-lg z-40 flex items-center justify-center" id="shareBtn" title="Bagikan Profil">
        <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
        </svg>
    </button>

    <!-- Admin Panel -->
    <div class="admin-panel">
        <button class="admin-btn" id="accountBtn" title="Admin Panel">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                <path d="M5 21c0-3 6-3 7-3s7 0 7 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </button>
    </div>

    <!-- Main Container -->
    <main class="min-h-screen flex items-center justify-center p-4" style="display: none;" id="mainContent">
        <div class="glass-container rounded-3xl w-full max-w-md overflow-hidden relative">
            <!-- Profile Section -->
            <div class="text-center p-8 pb-4" data-aos="fade-down" data-aos-duration="1000">
                <div class="avatar w-32 h-32 mx-auto mb-6 relative" id="avatarContainer">
                    <img src="https://raw.githubusercontent.com/ItzGirin24/TelugeAgro/refs/heads/main/logo%20Teluge.jpg" alt="TelugeAgro Logo" class="w-full h-full object-cover rounded-full border-4 border-white shadow-2xl" id="avatarImage">
                </div>

                <h1 class="text-3xl font-bold text-gray-800 mb-2" id="companyName"><a href="index.html"><img src="yeat_logo-removebg-preview.png" alt="TelugeAgro" style="height: 1em; width: auto;"></a></h1>
                <p class="description text-gray-600 leading-relaxed mb-6" id="companyDescription">
                    Supplier Pisang Dan Spesialis - Good Bananas Supplier & Specialist Until Export, Purworejo Central Java ID
                </p>

                <!-- Statistics -->
                <div class="grid grid-cols-3 gap-4 mb-8" data-aos="fade-up" data-aos-delay="200">
                    <div class="stat-card rounded-2xl p-4 text-center">
                        <div class="counter" id="stat1">20+</div>
                        <div class="text-xs text-gray-600" id="stat1Label">Ton/Bulan</div>
                    </div>
                    <div class="stat-card rounded-2xl p-4 text-center">
                        <div class="counter" id="stat2">15+</div>
                        <div class="text-xs text-gray-600" id="stat2Label">Provinsi</div>
                    </div>
                    <div class="stat-card rounded-2xl p-4 text-center">
                        <div class="counter" id="stat3">+</div>
                        <div class="text-xs text-gray-600" id="stat3Label">Tahun</div>
                    </div>
                </div>
            </div>

            <!-- Links Section -->
            <div class="px-8 pb-8 space-y-4" id="linksContainer">
                <!-- E-commerce Links -->
                <div data-aos="fade-up" data-aos-delay="300">
                    <button class="link-btn btn-ecommerce w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleLinkClick('https://www.tokopedia.com/telugeagro')" data-title="Tokopedia" data-url="https://www.tokopedia.com/telugeagro" data-logo="https://teluge.vercel.app/Logo%20Tokopedia%20(1).png" data-category="ecommerce">
                        <div class="flex items-center">
                            <img src="https://teluge.vercel.app/Logo%20Tokopedia%20(1).png" alt="Tokopedia" class="w-8 h-8 rounded-lg mr-4">
                            <span>Tokopedia</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <div data-aos="fade-up" data-aos-delay="400">
                    <button class="link-btn btn-ecommerce w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleLinkClick('https://shopee.co.id/t3luge_agro?is_from_login=true')" data-title="Shopee" data-url="https://shopee.co.id/t3luge_agro?is_from_login=true" data-logo="https://teluge.vercel.app/Logo%20Shopee.png" data-category="ecommerce">
                        <div class="flex items-center">
                            <img src="https://teluge.vercel.app/Logo%20Shopee.png" alt="Shopee" class="w-8 h-8 rounded-lg mr-4">
                            <span>Shopee</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <!-- Social Media Links -->
                <div data-aos="fade-up" data-aos-delay="500">
                    <button class="link-btn btn-social w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleLinkClick('https://www.instagram.com/teluge_agro?igsh=cXR3YWtxaDNnYjJw')" data-title="Instagram" data-url="https://www.instagram.com/teluge_agro?igsh=cXR3YWtxaDNnYjJw" data-logo="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" data-category="social">
                        <div class="flex items-center">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" class="w-8 h-8 rounded-lg mr-4">
                            <span>Instagram</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <div data-aos="fade-up" data-aos-delay="600">
                    <button class="link-btn btn-social w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleLinkClick('https://www.facebook.com/TelugeAgro?rdid=ba1ZrBdIXWKmtGmH&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1CPJqr4wzQ%2F%23')" data-title="Facebook" data-url="https://www.facebook.com/TelugeAgro?rdid=ba1ZrBdIXWKmtGmH&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1CPJqr4wzQ%2F%23" data-logo="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" data-category="social">
                        <div class="flex items-center">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook" class="w-8 h-8 rounded-lg mr-4">
                            <span>Facebook</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <!-- Business Links -->
                <div data-aos="fade-up" data-aos-delay="700">
                    <button class="link-btn btn-business w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleLinkClick('store.html')" data-title="Toko Online" data-url="store.html" data-logo="🛒" data-category="business">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-white rounded-lg mr-4 flex items-center justify-center">
                                <span class="text-xl">🛒</span>
                            </div>
                            <span>Toko Online</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <div data-aos="fade-up" data-aos-delay="800">
                    <button class="link-btn btn-business w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleLinkClick('leadingpage.html')" data-title="Website Resmi" data-url="leadingpage.html" data-logo="🌐" data-category="business">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-white rounded-lg mr-4 flex items-center justify-center">
                                <span class="text-xl">🌐</span>
                            </div>
                            <span>Website Resmi</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <!-- Contact Links -->
                <div data-aos="fade-up" data-aos-delay="900">
                    <button class="link-btn btn-contact w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleWhatsAppClick()" data-title="WhatsApp Business" data-url="https://wa.me/628112638318" data-logo="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" data-category="contact">
                        <div class="flex items-center">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" class="w-8 h-8 rounded-lg mr-4">
                            <span>WhatsApp Business</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <div data-aos="fade-up" data-aos-delay="1000">
                    <button class="link-btn btn-business w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group" onclick="handleLinkClick('https://www.google.com/maps/place/Teluge+Agro+-+Supplier+Pisang+dan+Spesialis/@-7.7408703,109.9370574,692m/data=!3m2!1e3!4b1!4m6!3m5!1s0x2e7ac390dce0a6eb:0xf0cb3eb8af2c7312!8m2!3d-7.7408703!4d109.9370574!16s%2Fg%2F11hfg1m849?entry=ttu&g_ep=EgoyMDI5MDgyNS4wIKXMDSoASAFQAw%3D%3D')" data-title="Lokasi Google Maps" data-url="https://www.google.com/maps/place/Teluge+Agro+-+Supplier+Pisang+dan+Spesialis/@-7.7408703,109.9370574,692m/data=!3m2!1e3!4b1!4m6!3m5!1s0x2e7ac390dce0a6eb:0xf0cb3eb8af2c7312!8m2!3d-7.7408703!4d109.9370574!16s%2Fg%2F11hfg1m849?entry=ttu&g_ep=EgoyMDI5MDgyNS4wIKXMDSoASAFQAw%3D%3D" data-logo="https://teluge.vercel.app/Logo%20Maps.png" data-category="business">
                        <div class="flex items-center">
                            <img src="https://teluge.vercel.app/Logo%20Maps.png" alt="Google Maps" class="w-8 h-8 rounded-lg mr-4">
                            <span>Lokasi Google Maps</span>
                        </div>
                        <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center pb-8 px-8" data-aos="fade-up" data-aos-delay="1100">
                <p class="text-sm text-gray-500 mb-4">© 2017 TelugeAgro - Banana Supplier</p>
                <div class="flex justify-center space-x-4">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        🌱 Organik
                    </span>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                        🚚 Siap Kirim
                    </span>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                        ⭐ Berkualitas 
                    </span>
                </div>
            </div>
        </div>
    </main>

    <!-- Consistent Footer -->
    <footer class="footer text-white py-8 mt-16" style="display: none;" id="mainFooter">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div class="md:col-span-2">
                    <div class="flex items-center space-x-3 mb-4">
                        <img src="https://raw.githubusercontent.com/ItzGirin24/TelugeAgro/refs/heads/main/logo%20Teluge.jpg" alt="TelugeAgro Logo" class="w-12 h-12 rounded-full">
                        <span class="text-2xl font-bold">TelugeAgro</span>
                    </div>
                    <p class="text-gray-300 mb-4 leading-relaxed">
                        Bio Link pemasok pisang terbaik dari Purworejo, Jawa Tengah. Hubungkan semua platform bisnis kami dalam satu tempat.
                    </p>
                    <div class="flex space-x-4">
                        <a href="https://www.instagram.com/teluge_agro" class="bg-gray-800 p-3 rounded-full hover:bg-green-600 transition-colors duration-300">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                        <a href="https://www.facebook.com/TelugeAgro" class="bg-gray-800 p-3 rounded-full hover:bg-green-600 transition-colors duration-300">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Menu</h3>
                    <ul class="space-y-2">
                        <li><a href="leadingpage.html" class="text-gray-300 hover:text-green-400 transition-colors duration-300">Beranda</a></li>
                        <li><a href="store.html" class="text-gray-300 hover:text-green-400 transition-colors duration-300">Toko</a></li>
                        <li><a href="leadingpage.html#about" class="text-gray-300 hover:text-green-400 transition-colors duration-300">Tentang</a></li>
                        <li><a href="cart.html" class="text-gray-300 hover:text-green-400 transition-colors duration-300">Keranjang</a></li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Kontak</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li>📍 Purworejo, Jawa Tengah</li>
                        <li>📱 +62 811-2638-318</li>
                        <li>✉️ teluge.agro@gmail.com</li>
                        <li>🕒 24/7 Customer Support</li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-gray-800 mt-8 pt-8 text-center">
                <p class="text-gray-400">© 2017 TelugeAgro. Semua hak dilindungi undang-undang.</p>
            </div>
        </div>
    </footer>

    <!-- Admin Menu -->
    <div id="adminMenu" class="hidden fixed bottom-20 left-6 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 min-w-[240px]">
        <div class="p-4 border-b border-gray-100">
            <p class="text-sm font-semibold text-gray-800">TelugeAgro Admin</p>
            <p class="text-xs text-gray-400">Bio Editor</p>
        </div>
        <div class="flex flex-col">
            <button onclick="toggleEditMode()" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-green-50 hover:text-green-600 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                </svg>
                <span id="editModeText">Mode Edit</span>
            </button>
            <button onclick="addNewLink()" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-green-50 hover:text-green-600 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
                Tambah Link Baru
            </button>
            <button onclick="saveToFirebase()" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                </svg>
                Simpan ke Database
            </button>
            <button onclick="logoutAdmin()" class="flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                </svg>
                Logout
            </button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
        <div class="glass-container rounded-2xl p-8 w-80 max-w-full mx-4">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-6" Admin Login</h2>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="username" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-xl font-semibold hover:bg-green-700 transition-colors">
                     Login
                </button>
                <button type="button" id="loginCancel" class="w-full mt-3 text-gray-600 hover:text-gray-800 transition-colors">
                    Cancel
                </button>
        </form>



        <p id="loginError" class="text-red-600 mt-3 text-center hidden"></p>
        </div>
    </div>

    <!-- Service Edit Modal -->
    <div id="serviceModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-60">
        <div class="glass-container rounded-2xl p-8 w-96 max-w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h2 id="serviceModalTitle" class="text-2xl font-bold text-center text-gray-800 mb-6">✏️ Edit Link</h2>
            <form id="serviceForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Judul Link</label>
                    <input type="text" id="serviceTitle" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Action/Destination</label>
                    <input type="text" id="serviceUrl" required placeholder="https://example.com, #scroll-top, function:myFunction, 08123456789, dll." class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">URL Logo</label>
                    <input type="url" id="serviceLogo" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Kategori</label>
                    <select id="serviceCategory" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        <option value="ecommerce">E-commerce (Orange)</option>
                        <option value="social">Social Media (Purple)</option>
                        <option value="business">Business (Blue)</option>
                        <option value="contact">Contact (Green)</option>
                    </select>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="button" id="cancelServiceBtn" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors">
                        Batal
                    </button>
                    <button type="submit" class="flex-1 bg-green-600 text-white py-3 rounded-xl font-semibold hover:bg-green-700 transition-colors">
                        Simpan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toast-message"></span>
    </div>

    <!-- Scripts -->
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true,
            offset: 50
        });

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB2sLqWwZIxr65c3CcNgKCCjmDTeDlSnfY",
            authDomain: "telugeagro2025.firebaseapp.com",
            projectId: "telugeagro2025",
            storageBucket: "telugeagro2025.firebasestorage.app",
            messagingSenderId: "1029963109637",
            appId: "1:1029963109637:web:86824d0db45e1489b3136c",
            measurementId: "G-XF1JDPME66"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Global Variables
        const ADMIN_USERNAME = 'teluge@admin.app';
        const ADMIN_PASSWORD = 'teluge2025';
        const CONTENT_COLLECTION = 'bioLinkContent';
        const DEFAULT_DOC_ID = 'mainBioLink';

        let isLoggedIn = false;
        let isEditMode = false;
        let currentEditingIndex = -1;

        // Loading Screen
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('loading-screen').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loading-screen').style.display = 'none';
                    document.getElementById('mainContent').style.display = 'flex';
                    document.getElementById('mainFooter').style.display = 'block';
                    loadContentFromFirebase();
                }, 500);
            }, 2000);
        });

        // Authentication Functions
        function showLoginModal() {
            document.getElementById('loginModal').classList.remove('hidden');
            document.getElementById('loginError').classList.add('hidden');
        }

        function hideLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }

        function loginAdmin(username, password) {
            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                isLoggedIn = true;
                localStorage.setItem('adminLoggedIn', 'true');
                hideLoginModal();
                showAdminMenu();
                showToast('Login berhasil! Mode edit visual tersedia', 'success');
                return true;
            } else {
                document.getElementById('loginError').textContent = 'Username atau password salah';
                document.getElementById('loginError').classList.remove('hidden');
                return false;
            }
        }

        // Google Sign-In Function
        async function signInWithGoogle() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                const result = await auth.signInWithPopup(provider);
                const user = result.user;

                // Store user info in localStorage
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', user.displayName);
                localStorage.setItem('userEmail', user.email);
                localStorage.setItem('userPhoto', user.photoURL);

                hideLoginModal();
                showUserMenu();
                showToast(`Selamat datang, ${user.displayName}!`, 'success');
            } catch (error) {
                console.error('Error signing in with Google:', error);
                document.getElementById('loginError').textContent = 'Gagal login dengan Google';
                document.getElementById('loginError').classList.remove('hidden');
            }
        }

        // Auth State Listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', user.displayName);
                localStorage.setItem('userEmail', user.email);
                localStorage.setItem('userPhoto', user.photoURL);
                showUserMenu();
            } else {
                // User is signed out
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('userName');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('userPhoto');
                hideUserMenu();
            }
        });

        function logoutAdmin() {
            isLoggedIn = false;
            isEditMode = false;
            localStorage.removeItem('adminLoggedIn');
            hideAdminMenu();
            exitEditMode();

            // Sign out from Firebase
            auth.signOut().then(() => {
                showToast('Logout berhasil');
            }).catch((error) => {
                console.error('Error signing out:', error);
                showToast('Logout berhasil, tetapi ada error saat sign out dari Firebase');
            });
        }

        function checkLoginStatus() {
            const loggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            if (loggedIn) {
                isLoggedIn = true;
                showAdminMenu();
            }
        }

        // Admin Menu Functions
        function showAdminMenu() {
            const adminMenu = document.getElementById('adminMenu');
            adminMenu.classList.remove('hidden');
        }

        function hideAdminMenu() {
            const adminMenu = document.getElementById('adminMenu');
            adminMenu.classList.add('hidden');
        }

        function toggleAdminMenu() {
            const adminMenu = document.getElementById('adminMenu');
            if (adminMenu.classList.contains('hidden')) {
                showAdminMenu();
            } else {
                hideAdminMenu();
            }
        }

        // Edit Mode Functions
        function toggleEditMode() {
            isEditMode = !isEditMode;
            const editModeText = document.getElementById('editModeText');
            const container = document.querySelector('.glass-container');
            
            if (isEditMode) {
                enterEditMode();
                editModeText.textContent = 'Keluar Mode Edit';
                showToast('Mode edit visual diaktifkan - Klik elemen untuk mengedit');
            } else {
                exitEditMode();
                editModeText.textContent = 'Mode Edit Visual';
                showToast('Mode edit visual dinonaktifkan');
            }
        }

        function enterEditMode() {
            const container = document.querySelector('.glass-container');
            container.classList.add('edit-mode');

            // Make content editable
            const editableElements = [
                'companyName', 'companyDescription',
                'stat1', 'stat1Label', 'stat2', 'stat2Label', 'stat3', 'stat3Label'
            ];

            editableElements.forEach(id => {
                const element = document.getElementById(id);
                element.setAttribute('contenteditable', 'true');
                // Add auto-save on blur (when user clicks away)
                element.addEventListener('blur', autoSaveContent);
                // Add auto-save on Enter key
                element.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        element.blur();
                    }
                });
            });

            // Add edit controls to links
            addEditControlsToLinks();

            // Add avatar click handler
            document.getElementById('avatarContainer').addEventListener('click', editAvatar);
        }

        function exitEditMode() {
            const container = document.querySelector('.glass-container');
            container.classList.remove('edit-mode');
            
            // Remove contenteditable
            document.getElementById('companyName').removeAttribute('contenteditable');
            document.getElementById('companyDescription').removeAttribute('contenteditable');
            document.getElementById('stat1').removeAttribute('contenteditable');
            document.getElementById('stat1Label').removeAttribute('contenteditable');
            document.getElementById('stat2').removeAttribute('contenteditable');
            document.getElementById('stat2Label').removeAttribute('contenteditable');
            document.getElementById('stat3').removeAttribute('contenteditable');
            document.getElementById('stat3Label').removeAttribute('contenteditable');
            
            // Remove edit controls
            document.querySelectorAll('.edit-controls').forEach(control => {
                control.remove();
            });
            
            // Remove avatar click handler
            document.getElementById('avatarContainer').removeEventListener('click', editAvatar);
        }

        function addEditControlsToLinks() {
            const linkButtons = document.querySelectorAll('.link-btn');
            linkButtons.forEach((btn, index) => {
                if (!btn.querySelector('.edit-controls')) {
                    const editControls = document.createElement('div');
                    editControls.className = 'edit-controls';
                    editControls.innerHTML = `
                        <button class="edit-btn bg-blue-500 text-white" onclick="editLink(${index})" title="Edit Link">✏️</button>
                        <button class="edit-btn bg-red-500 text-white" onclick="deleteLink(${index})" title="Hapus Link">🗑️</button>
                    `;
                    btn.appendChild(editControls);
                }
            });
        }

        // Link Management Functions
        function editLink(index) {
            currentEditingIndex = index;
            const linkButtons = document.querySelectorAll('.link-btn');
            const button = linkButtons[index];
            
            const title = button.dataset.title || 'Link Title';
            const url = button.dataset.url || '';
            const logo = button.dataset.logo || '';
            const category = button.dataset.category || 'business';
            
            // Fill modal
            document.getElementById('serviceTitle').value = title;
            document.getElementById('serviceUrl').value = url;
            document.getElementById('serviceLogo').value = logo;
            document.getElementById('serviceCategory').value = category;
            document.getElementById('serviceModalTitle').textContent = '✏️ Edit Link';
            
            // Show modal
            document.getElementById('serviceModal').classList.remove('hidden');
        }

        function deleteLink(index) {
            if (confirm('Yakin ingin menghapus link ini?')) {
                const linkButtons = document.querySelectorAll('.link-btn');
                const button = linkButtons[index];
                button.parentElement.remove();
                showToast('Link berhasil dihapus');
                
                // Re-add edit controls
                setTimeout(() => {
                    addEditControlsToLinks();
                }, 100);
            }
        }

        function addNewLink() {
            currentEditingIndex = -1;
            
            // Clear modal
            document.getElementById('serviceForm').reset();
            document.getElementById('serviceModalTitle').textContent = '➕ Tambah Link Baru';
            
            // Show modal
            document.getElementById('serviceModal').classList.remove('hidden');
        }

        function editAvatar() {
            const newUrl = prompt('Masukkan URL gambar avatar baru:', document.getElementById('avatarImage').src);
            if (newUrl && newUrl.trim() !== '') {
                document.getElementById('avatarImage').src = newUrl.trim();
                showToast('Avatar berhasil diubah');

                // Auto-save to database
                if (isLoggedIn) {
                    autoSaveContent();
                }
            }
        }

        // Auto-save function for content changes
        async function autoSaveContent() {
            if (!isLoggedIn) {
                return;
            }

            try {
                // Collect all current data
                const contentData = {
                    companyName: document.getElementById('companyName').textContent,
                    companyDescription: document.getElementById('companyDescription').textContent,
                    avatarUrl: document.getElementById('avatarImage').src,
                    stats: {
                        stat1: document.getElementById('stat1').textContent,
                        stat1Label: document.getElementById('stat1Label').textContent,
                        stat2: document.getElementById('stat2').textContent,
                        stat2Label: document.getElementById('stat2Label').textContent,
                        stat3: document.getElementById('stat3').textContent,
                        stat3Label: document.getElementById('stat3Label').textContent
                    },
                    links: collectCurrentLinks(),
                    lastUpdated: new Date().toISOString(),
                    updatedBy: ADMIN_USERNAME
                };

                // Save to Firebase
                await db.collection(CONTENT_COLLECTION).doc(DEFAULT_DOC_ID).set(contentData);

                showToast('✅ Perubahan otomatis tersimpan ke database!', 'success');

            } catch (error) {
                console.error('Error auto-saving to Firebase:', error);
                showToast('❌ Error menyimpan perubahan otomatis', 'error');
            }
        }

        // Firebase Content Management
        async function loadContentFromFirebase() {
            try {
                const doc = await db.collection(CONTENT_COLLECTION).doc(DEFAULT_DOC_ID).get();
                
                if (doc.exists) {
                    const data = doc.data();
                    
                    // Update profile info
                    if (data.companyName) document.getElementById('companyName').textContent = data.companyName;
                    if (data.companyDescription) document.getElementById('companyDescription').textContent = data.companyDescription;
                    if (data.avatarUrl) document.getElementById('avatarImage').src = data.avatarUrl;
                    
                    // Update statistics
                    if (data.stats) {
                        document.getElementById('stat1').textContent = data.stats.stat1 || '10+';
                        document.getElementById('stat1Label').textContent = data.stats.stat1Label || 'Ton/Bulan';
                        document.getElementById('stat2').textContent = data.stats.stat2 || '15+';
                        document.getElementById('stat2Label').textContent = data.stats.stat2Label || 'Provinsi';
                        document.getElementById('stat3').textContent = data.stats.stat3 || '9+';
                        document.getElementById('stat3Label').textContent = data.stats.stat3Label || 'Tahun';
                    }
                    
                    // Update links if available
                    if (data.links && data.links.length > 0) {
                        updateLinksFromFirebase(data.links);
                    }
                    
                    showToast('Konten berhasil dimuat dari database');
                } else {
                    showToast('Menggunakan konten default');
                }
            } catch (error) {
                console.error('Error loading content:', error);
                showToast('Error memuat konten: ' + error.message, 'error');
            }
        }

        async function saveToFirebase() {
            if (!isLoggedIn) {
                showToast('Harus login sebagai admin untuk menyimpan', 'error');
                return;
            }

            try {
                // Collect all current data
                const contentData = {
                    companyName: document.getElementById('companyName').textContent,
                    companyDescription: document.getElementById('companyDescription').textContent,
                    avatarUrl: document.getElementById('avatarImage').src,
                    stats: {
                        stat1: document.getElementById('stat1').textContent,
                        stat1Label: document.getElementById('stat1Label').textContent,
                        stat2: document.getElementById('stat2').textContent,
                        stat2Label: document.getElementById('stat2Label').textContent,
                        stat3: document.getElementById('stat3').textContent,
                        stat3Label: document.getElementById('stat3Label').textContent
                    },
                    links: collectCurrentLinks(),
                    lastUpdated: new Date().toISOString(),
                    updatedBy: ADMIN_USERNAME
                };

                // Save to Firebase
                await db.collection(CONTENT_COLLECTION).doc(DEFAULT_DOC_ID).set(contentData);
                
                showToast('✅ Berhasil disimpan ke database Firebase!', 'success');
                
            } catch (error) {
                console.error('Error saving to Firebase:', error);
                showToast('❌ Error menyimpan: ' + error.message, 'error');
            }
        }

        function collectCurrentLinks() {
            const links = [];
            const linkButtons = document.querySelectorAll('.link-btn');
            
            linkButtons.forEach(btn => {
                const img = btn.querySelector('img');
                const span = btn.querySelector('span');
                
                if (span) {
                    links.push({
                        title: btn.dataset.title || span.textContent,
                        url: btn.dataset.url || '',
                        logo: btn.dataset.logo || (img ? img.src : ''),
                        category: btn.dataset.category || 'business'
                    });
                }
            });
            
            return links;
        }

        function updateLinksFromFirebase(links) {
            const linksContainer = document.getElementById('linksContainer');
            if (!linksContainer || !links || links.length === 0) {
                return;
            }

            // Clear existing links
            linksContainer.innerHTML = '';

            // Rebuild links from Firebase data
            links.forEach((link, index) => {
                const linkDiv = document.createElement('div');
                linkDiv.setAttribute('data-aos', 'fade-up');
                linkDiv.setAttribute('data-aos-delay', (300 + index * 100).toString());

                const button = document.createElement('button');
                button.className = `link-btn btn-${link.category || 'business'} w-full text-white font-semibold py-4 px-6 rounded-2xl flex items-center justify-between group`;
                button.setAttribute('data-title', link.title);
                button.setAttribute('data-url', link.url);
                button.setAttribute('data-logo', link.logo);
                button.setAttribute('data-category', link.category || 'business');

                // Set onclick handler
                if (link.title === 'WhatsApp Business') {
                    button.setAttribute('onclick', 'handleWhatsAppClick()');
                } else {
                    button.setAttribute('onclick', `handleLinkClick('${link.url}')`);
                }

                const leftDiv = document.createElement('div');
                leftDiv.className = 'flex items-center';

                // Add logo
                if (link.logo && link.logo !== '🛒' && link.logo !== '🌐') {
                    const img = document.createElement('img');
                    img.src = link.logo;
                    img.alt = link.title;
                    img.className = 'w-8 h-8 rounded-lg mr-4';
                    leftDiv.appendChild(img);
                } else if (link.logo === '🛒' || link.logo === '🌐') {
                    const emojiDiv = document.createElement('div');
                    emojiDiv.className = 'w-8 h-8 bg-white rounded-lg mr-4 flex items-center justify-center';
                    emojiDiv.innerHTML = `<span class="text-xl">${link.logo}</span>`;
                    leftDiv.appendChild(emojiDiv);
                }

                const span = document.createElement('span');
                span.textContent = link.title;
                leftDiv.appendChild(span);

                const rightDiv = document.createElement('div');
                rightDiv.className = 'flex items-center';
                rightDiv.innerHTML = `
                    <svg class="w-5 h-5 transform group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                `;

                button.appendChild(leftDiv);
                button.appendChild(rightDiv);
                linkDiv.appendChild(button);
                linksContainer.appendChild(linkDiv);
            });

            // Re-add edit controls if in edit mode
            if (isEditMode) {
                setTimeout(() => {
                    addEditControlsToLinks();
                }, 100);
            }
        }

        // Utility Functions - Enhanced Flexible Action Handler
        function handleLinkClick(action) {
            if (isEditMode) {
                showToast('Mode edit aktif - klik tombol edit untuk mengubah link');
                return;
            }

            // Add click animation
            if (event && event.target) {
                const btn = event.target.closest('.link-btn');
                if (btn) {
                    btn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        btn.style.transform = '';
                    }, 150);
                }
            }

            setTimeout(() => {
                executeAction(action);
            }, 200);
        }

        function handleWhatsAppClick() {
            if (isEditMode) {
                showToast('Mode edit aktif - klik tombol edit untuk mengubah link');
                return;
            }

            // Add click animation
            if (event && event.target) {
                const btn = event.target.closest('.link-btn');
                if (btn) {
                    btn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        btn.style.transform = '';
                    }, 150);
                }
            }

            setTimeout(() => {
                openWhatsApp();
            }, 200);
        }

        // Enhanced Action Executor - Supports multiple action types
        function executeAction(action) {
            if (!action || typeof action !== 'string') {
                console.error('Invalid action:', action);
                return;
            }

            // Remove any surrounding quotes if present
            action = action.replace(/^["']|["']$/g, '');

            // Check action type and execute accordingly
            if (action.startsWith('http://') || action.startsWith('https://')) {
                // External URL
                window.open(action, '_blank');
            } else if (action.startsWith('#')) {
                // Internal page anchor or special action
                handleSpecialAction(action);
            } else if (action.includes('.html') || action.includes('.php') || action.includes('.jsp')) {
                // Local page/file
                window.location.href = action;
            } else if (action.startsWith('javascript:') || action.startsWith('js:')) {
                // JavaScript execution
                const jsCode = action.replace(/^(javascript:|js:)/, '');
                try {
                    eval(jsCode);
                } catch (error) {
                    console.error('JavaScript execution error:', error);
                    showToast('Error executing JavaScript action', 'error');
                }
            } else if (action.startsWith('function:')) {
                // Function call
                const funcName = action.replace('function:', '');
                if (typeof window[funcName] === 'function') {
                    window[funcName]();
                } else {
                    console.error('Function not found:', funcName);
                    showToast('Function not found: ' + funcName, 'error');
                }
            } else if (action.startsWith('mailto:')) {
                // Email
                window.location.href = action;
            } else if (action.startsWith('tel:')) {
                // Phone call
                window.location.href = action;
            } else if (action.match(/^\d+$/)) {
                // WhatsApp number (just numbers)
                const whatsappUrl = `https://wa.me/${action}`;
                window.open(whatsappUrl, '_blank');
            } else {
                // Default: treat as URL or search term
                if (action.includes('.') && !action.includes(' ')) {
                    // Looks like a domain, try to open as URL
                    window.open('https://' + action, '_blank');
                } else {
                    // Search term - could be enhanced to use specific search engine
                    const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(action)}`;
                    window.open(searchUrl, '_blank');
                }
            }
        }

        // Handle special actions (anchors, modals, etc.)
        function handleSpecialAction(action) {
            const target = action.substring(1); // Remove #

            switch (target) {
                case 'scroll-top':
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    break;
                case 'show-contact':
                    // Could show a contact modal
                    showToast('Fitur kontak sedang dalam pengembangan');
                    break;
                case 'share':
                    // Trigger share functionality
                    document.getElementById('shareBtn').click();
                    break;
                default:
                    // Try to scroll to element with that ID
                    const element = document.getElementById(target);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth' });
                    } else {
                        console.warn('Element not found:', target);
                        showToast('Section tidak ditemukan: ' + target);
                    }
                    break;
            }
        }

        // Legacy functions for backward compatibility
        function openLink(url) {
            executeAction(url);
        }

        function openWhatsApp() {
            const phoneNumber = '628112638318';
            const message = 'Halo TelugeAgro, saya tertarik dengan produk pisang terbaik Anda!';
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 4000);
        }

        // Event Listeners
        document.getElementById('accountBtn').addEventListener('click', () => {
            if (isLoggedIn) {
                toggleAdminMenu();
            } else {
                showLoginModal();
            }
        });

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            loginAdmin(username, password);
        });

        document.getElementById('loginCancel').addEventListener('click', hideLoginModal);

        document.getElementById('googleLoginBtn').addEventListener('click', signInWithGoogle);

        document.getElementById('shareBtn').addEventListener('click', () => {
            if (navigator.share) {
                navigator.share({
                    title: 'TelugeAgro - Terbaik Banana Supplier',
                    text: 'Bio Link TelugeAgro - Supplier Pisang Terbaik dari Purworejo, Jawa Tengah',
                    url: window.location.href
                }).catch(console.error);
            } else {
                navigator.clipboard.writeText(window.location.href).then(() => {
                    showToast('Link berhasil disalin ke clipboard!');
                }).catch(console.error);
            }
        });

        document.getElementById('serviceForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const title = document.getElementById('serviceTitle').value;
            const url = document.getElementById('serviceUrl').value;
            const logo = document.getElementById('serviceLogo').value;
            const category = document.getElementById('serviceCategory').value;

            if (currentEditingIndex >= 0) {
                // Edit existing link
                const linkButtons = document.querySelectorAll('.link-btn');
                const button = linkButtons[currentEditingIndex];

                // Update button data
                button.dataset.title = title;
                button.dataset.url = url;
                button.dataset.logo = logo;
                button.dataset.category = category;

                // Update onclick
                if (title === 'WhatsApp Business') {
                    button.setAttribute('onclick', 'openWhatsApp()');
                } else {
                    button.setAttribute('onclick', `handleLinkClick('${url}')`);
                }

                // Update visual elements
                const span = button.querySelector('span');
                if (span) span.textContent = title;

                const img = button.querySelector('img');
                if (img && logo) img.src = logo;

                // Update category class
                button.className = button.className.replace(/btn-(ecommerce|social|business|contact)/, `btn-${category}`);

                // Auto-save to database
                try {
                    await saveToFirebase();
                    showToast('✅ Link berhasil diperbarui dan disimpan ke database!');
                } catch (error) {
                    console.error('Error saving to database:', error);
                    showToast('❌ Link diperbarui tetapi gagal menyimpan ke database', 'error');
                }
            } else {
                // Add new link - implement based on your needs
                showToast('Fitur tambah link baru sedang dalam pengembangan');
            }

            document.getElementById('serviceModal').classList.add('hidden');
        });

        document.getElementById('cancelServiceBtn').addEventListener('click', () => {
            document.getElementById('serviceModal').classList.add('hidden');
        });

        // Close modals when clicking outside
        document.addEventListener('click', (e) => {
            const adminMenu = document.getElementById('adminMenu');
            const accountBtn = document.getElementById('accountBtn');
            
            if (!adminMenu.contains(e.target) && !accountBtn.contains(e.target)) {
                if (!adminMenu.classList.contains('hidden')) {
                    hideAdminMenu();
                }
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            checkLoginStatus();
        });

        // Add recommendation function for cart integration
        function addRecommendation(productName, price) {
            // Redirect to cart page
            window.location.href = 'cart.html';
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.getElementById('loginModal').classList.add('hidden');
                document.getElementById('serviceModal').classList.add('hidden');
            }

            // Ctrl/Cmd + S to save (if logged in and in edit mode)
            if ((e.ctrlKey || e.metaKey) && e.key === 's' && isLoggedIn) {
                e.preventDefault();
                saveToFirebase();
            }
        });
    </script>

    <script>
        // Animated counter function for statistics
        function animateCounter(id, start, end, duration) {
            const element = document.getElementById(id);
            if (!element) return;

            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                element.textContent = value + '+';
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Randomize animation start for each stat
        function animateStats() {
            animateCounter('stat1', 0, 10, 2000 + Math.random() * 1000);
            animateCounter('stat2', 0, 15, 2000 + Math.random() * 1000);
            animateCounter('stat3', 0, 9, 2000 + Math.random() * 1000);
        }

        // Trigger animation on page load and on scroll into view
        function isElementInViewport(el) {
            const rect = el.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }

        function checkStatsVisibility() {
            const statsContainer = document.querySelector('.grid.grid-cols-3');
            if (statsContainer && isElementInViewport(statsContainer)) {
                animateStats();
                window.removeEventListener('scroll', checkStatsVisibility);
            }
        }

        window.addEventListener('load', () => {
            checkStatsVisibility();
        });

        window.addEventListener('scroll', () => {
            checkStatsVisibility();
        });
    </script>
</body>
</html>

